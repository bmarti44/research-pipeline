{
  "metadata": {
    "timestamp": "20260202_173527",
    "experiment": "nl_vs_structured_tool_calling",
    "version": "v5_review_fixes",
    "num_trials": 5,
    "include_controls": true,
    "seed": 42,
    "n_positive": 1,
    "n_negative": 0,
    "total_observations": 10,
    "failed_trials_count": 0,
    "failed_trials": null
  },
  "design": {
    "description": "Both conditions receive identical WHEN-to-save guidance and equally explicit HOW-to-save examples. Vagueness comes from scenarios (user requests), not system prompts.",
    "nl_format": "Natural English (e.g., 'I'll save X to the codebase category')",
    "structured_format": "save-memory \"content\" \"category\""
  },
  "conditions": {
    "nl": "Natural language intent via [SAVE: category] tags",
    "structured": "Structured tool call via save-memory command"
  },
  "metrics": {
    "structured": {
      "recall": 1.0,
      "false_positive_rate": 0,
      "ci_95": [
        0.5655085052479191,
        1
      ],
      "true_positives": 5,
      "false_positives": 0,
      "n_positive_scenarios": 5,
      "n_negative_scenarios": 0
    },
    "nl": {
      "recall": 1.0,
      "false_positive_rate": 0,
      "ci_95": [
        0.5655085052479191,
        1
      ],
      "true_positives": 5,
      "false_positives": 0,
      "n_positive_scenarios": 5,
      "n_negative_scenarios": 0
    }
  },
  "scenario_level_analysis": {
    "description": "PRIMARY analysis - treats scenario as unit (statistically defensible)",
    "n_scenarios": 1,
    "nl_better_count": 0,
    "st_better_count": 0,
    "ties_count": 1,
    "median_diff_pp": 0.0,
    "mean_diff_pp": 0.0,
    "sign_test_p": 1.0,
    "wilcoxon_p": null,
    "bonferroni_alpha": 0.00625
  },
  "trial_level_comparison": {
    "description": "SECONDARY analysis - treats trials as independent (p-values may be inflated)",
    "caveat": "Trials within a scenario are correlated; use scenario-level analysis for valid inference",
    "nl_minus_structured_pp": 0.0,
    "mcnemar_chi_sq": 0.0,
    "mcnemar_p_value": 1.0,
    "nl_wins": 0,
    "structured_wins": 0,
    "both_succeed": 5,
    "both_fail": 0
  },
  "power_analysis": {
    "observed_effect": 0.0,
    "power_observed": 0.0,
    "required_n_80_power": Infinity,
    "required_n_90_power": Infinity,
    "message": "No effect observed; power analysis not meaningful"
  },
  "verification_language": {
    "nl_overall_rate": 0.0,
    "st_overall_rate": 0.0,
    "nl_verif_count": 0,
    "st_verif_count": 0,
    "nl_failure_verif_rate": null,
    "st_failure_verif_rate": null
  },
  "fidelity": {
    "nl_wins": 2,
    "structured_wins": 0,
    "ties": 3,
    "total": 5,
    "consistent_count": 2,
    "inconsistent_count": 3,
    "consistency_rate": 0.4,
    "comparisons": [
      {
        "scenario_id": "mem_implicit_003",
        "trial": 1,
        "winner": "tie",
        "reason": "AB: Both accurately capture that port 3000 is for development; A says \"used for development\" and B says \"used for development server\" - B adds \"server\" which is a reasonable inference but technically not stated, while A is more literal, making them roughly equivalent in accuracy. | BA: Content B more accurately captures the user's terse message \"port 3000 = dev\" without adding the assumption that it's specifically a \"server\" - the user only said \"dev\" (development), not \"development server\".",
        "ab_winner": "tie",
        "ba_winner": "nl",
        "consistent": false,
        "nl_content": "port 3000 is used for development",
        "structured_content": "<save-memory category=\"codebase\">Port 3000 is used for development server</save-memory>"
      },
      {
        "scenario_id": "mem_implicit_003",
        "trial": 2,
        "winner": "tie",
        "reason": "AB: Both accurately capture that port 3000 is for development; A says \"used for development\" and B says \"used for development server\" - B adds \"server\" which is a reasonable inference but technically not stated, while A is more literal, making them roughly equivalent in accuracy. | BA: Content B more accurately captures the user's terse message \"port 3000 = dev\" without adding the word \"server\" which was not mentioned in the original message, while Content A adds \"server\" which is a reasonable inference but technically a hallucination.",
        "ab_winner": "tie",
        "ba_winner": "nl",
        "consistent": false,
        "nl_content": "port 3000 is used for development",
        "structured_content": "<save-memory category=\"codebase\">Port 3000 is used for development server</save-memory>"
      },
      {
        "scenario_id": "mem_implicit_003",
        "trial": 3,
        "winner": "nl",
        "reason": "AB: Both capture the core information correctly, but B adds \"server\" which was not in the original message (\"dev\" only said \"development\"), making A more faithful to the original without hallucination. | BA: Content B more accurately captures the terse original message \"port 3000 = dev\" without adding the assumption that it's specifically a \"server\" - the user only said \"dev\" (development), not \"development server\".",
        "ab_winner": "nl",
        "ba_winner": "nl",
        "consistent": true,
        "nl_content": "port 3000 is used for development",
        "structured_content": "<save-memory category=\"codebase\">Port 3000 is used for development server</save-memory>"
      },
      {
        "scenario_id": "mem_implicit_003",
        "trial": 4,
        "winner": "nl",
        "reason": "AB: Content A accurately captures the user's statement that port 3000 is for development, while Content B adds \"server\" which was not specified in the original message, constituting a minor hallucination. | BA: Content B more accurately captures the user's terse message \"port 3000 = dev\" without adding the assumption that it's specifically a \"server\" - the user only said \"dev\" (development), and Content A adds \"server\" which wasn't in the original message.",
        "ab_winner": "nl",
        "ba_winner": "nl",
        "consistent": true,
        "nl_content": "port 3000 is used for development",
        "structured_content": "<save-memory category=\"codebase\">Port 3000 is used for development server</save-memory>"
      },
      {
        "scenario_id": "mem_implicit_003",
        "trial": 5,
        "winner": "tie",
        "reason": "AB: Both accurately capture the same essential information that port 3000 is used for development, with neither adding significant hallucinated details nor missing key information. | BA: Content B accurately captures that port 3000 is for development without adding the assumption of \"dev server\" which Content A introduces - the user only said \"dev\" without specifying it was a server.",
        "ab_winner": "tie",
        "ba_winner": "nl",
        "consistent": false,
        "nl_content": "port 3000 is used for development",
        "structured_content": "<save-memory category=\"codebase\">Port 3000 is used for the dev server</save-memory>"
      }
    ]
  },
  "familiarity": null,
  "results": [
    {
      "scenario_id": "mem_implicit_003",
      "condition": "structured",
      "query": "port 3000 = dev",
      "expected_action": true,
      "detected_intent": false,
      "tool_called": true,
      "success": true,
      "intent_phrases": [],
      "tool_content": "<save-memory category=\"codebase\">Port 3000 is used for development server</save-memory>",
      "response_text": "<save-memory category=\"codebase\">Port 3000 is used for development server</save-memory>\n\nGot it! I've noted that port 3000 is your development port. I'll remember this for future reference.",
      "is_control": false,
      "trial_number": 1,
      "is_true_positive": true,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": false,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null,
      "has_verification_language": false
    },
    {
      "scenario_id": "mem_implicit_003",
      "condition": "nl",
      "query": "port 3000 = dev",
      "expected_action": true,
      "detected_intent": true,
      "tool_called": false,
      "success": true,
      "intent_phrases": [
        "I'll remember"
      ],
      "tool_content": "I'll remember that port 3000 is used for development.\n\nI've noted that your development server runs on port 3000. This will be helpful context for future conversations about your project setup.",
      "response_text": "I'll remember that port 3000 is used for development.\n\nI've noted that your development server runs on port 3000. This will be helpful context for future conversations about your project setup.",
      "is_control": false,
      "trial_number": 1,
      "is_true_positive": true,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": false,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null,
      "has_verification_language": false
    },
    {
      "scenario_id": "mem_implicit_003",
      "condition": "structured",
      "query": "port 3000 = dev",
      "expected_action": true,
      "detected_intent": false,
      "tool_called": true,
      "success": true,
      "intent_phrases": [],
      "tool_content": "<save-memory category=\"codebase\">Port 3000 is used for development server</save-memory>",
      "response_text": "<save-memory category=\"codebase\">Port 3000 is used for development server</save-memory>\n\nGot it! I've noted that port 3000 is your development port. I'll remember this for future reference.",
      "is_control": false,
      "trial_number": 2,
      "is_true_positive": true,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": false,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null,
      "has_verification_language": false
    },
    {
      "scenario_id": "mem_implicit_003",
      "condition": "nl",
      "query": "port 3000 = dev",
      "expected_action": true,
      "detected_intent": true,
      "tool_called": false,
      "success": true,
      "intent_phrases": [
        "I'll save",
        "I'll remember"
      ],
      "tool_content": "I'll save that information for you.\n\nI'll remember that port 3000 is used for development in your project.",
      "response_text": "I'll save that information for you.\n\nI'll remember that port 3000 is used for development in your project.",
      "is_control": false,
      "trial_number": 2,
      "is_true_positive": true,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": false,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null,
      "has_verification_language": false
    },
    {
      "scenario_id": "mem_implicit_003",
      "condition": "nl",
      "query": "port 3000 = dev",
      "expected_action": true,
      "detected_intent": true,
      "tool_called": false,
      "success": true,
      "intent_phrases": [
        "I'll remember"
      ],
      "tool_content": "I'll remember that port 3000 is used for development.\n\nI've saved that your development server runs on port 3000. This will be useful context for future conversations when working with your project.",
      "response_text": "I'll remember that port 3000 is used for development.\n\nI've saved that your development server runs on port 3000. This will be useful context for future conversations when working with your project.",
      "is_control": false,
      "trial_number": 3,
      "is_true_positive": true,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": false,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null,
      "has_verification_language": false
    },
    {
      "scenario_id": "mem_implicit_003",
      "condition": "structured",
      "query": "port 3000 = dev",
      "expected_action": true,
      "detected_intent": false,
      "tool_called": true,
      "success": true,
      "intent_phrases": [],
      "tool_content": "<save-memory category=\"codebase\">Port 3000 is used for development server</save-memory>",
      "response_text": "<save-memory category=\"codebase\">Port 3000 is used for development server</save-memory>\n\nGot it! I've noted that port 3000 is your development port. I'll remember this for future reference.",
      "is_control": false,
      "trial_number": 3,
      "is_true_positive": true,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": false,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null,
      "has_verification_language": false
    },
    {
      "scenario_id": "mem_implicit_003",
      "condition": "structured",
      "query": "port 3000 = dev",
      "expected_action": true,
      "detected_intent": false,
      "tool_called": true,
      "success": true,
      "intent_phrases": [],
      "tool_content": "<save-memory category=\"codebase\">Port 3000 is used for development server</save-memory>",
      "response_text": "<save-memory category=\"codebase\">Port 3000 is used for development server</save-memory>\n\nGot it! I've noted that port 3000 is your development port. I'll remember this for future reference when working with your project.",
      "is_control": false,
      "trial_number": 4,
      "is_true_positive": true,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": false,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null,
      "has_verification_language": false
    },
    {
      "scenario_id": "mem_implicit_003",
      "condition": "nl",
      "query": "port 3000 = dev",
      "expected_action": true,
      "detected_intent": true,
      "tool_called": false,
      "success": true,
      "intent_phrases": [
        "I'll remember"
      ],
      "tool_content": "I'll remember that port 3000 is used for development.\n\nI've noted that your development server runs on port 3000. This will be helpful context for future conversations about your project setup.",
      "response_text": "I'll remember that port 3000 is used for development.\n\nI've noted that your development server runs on port 3000. This will be helpful context for future conversations about your project setup.",
      "is_control": false,
      "trial_number": 4,
      "is_true_positive": true,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": false,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null,
      "has_verification_language": false
    },
    {
      "scenario_id": "mem_implicit_003",
      "condition": "structured",
      "query": "port 3000 = dev",
      "expected_action": true,
      "detected_intent": false,
      "tool_called": true,
      "success": true,
      "intent_phrases": [],
      "tool_content": "<save-memory category=\"codebase\">Port 3000 is used for the dev server</save-memory>",
      "response_text": "<save-memory category=\"codebase\">Port 3000 is used for the dev server</save-memory>\n\nGot it! I've noted that port 3000 is used for development. I'll remember this for future reference.",
      "is_control": false,
      "trial_number": 5,
      "is_true_positive": true,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": false,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null,
      "has_verification_language": false
    },
    {
      "scenario_id": "mem_implicit_003",
      "condition": "nl",
      "query": "port 3000 = dev",
      "expected_action": true,
      "detected_intent": true,
      "tool_called": false,
      "success": true,
      "intent_phrases": [
        "I'll remember"
      ],
      "tool_content": "I'll remember that port 3000 is used for development in your project.\n\nI've saved that your development server runs on port 3000.",
      "response_text": "I'll remember that port 3000 is used for development in your project.\n\nI've saved that your development server runs on port 3000.",
      "is_control": false,
      "trial_number": 5,
      "is_true_positive": true,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": false,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null,
      "has_verification_language": false
    }
  ]
}