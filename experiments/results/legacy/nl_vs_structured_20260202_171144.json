{
  "metadata": {
    "timestamp": "20260202_171144",
    "experiment": "nl_vs_structured_tool_calling",
    "version": "v5_review_fixes",
    "num_trials": 5,
    "include_controls": true,
    "seed": 42,
    "n_positive": 1,
    "n_negative": 0,
    "total_observations": 10,
    "failed_trials_count": 0,
    "failed_trials": null
  },
  "design": {
    "description": "Both conditions receive identical WHEN-to-save guidance and equally explicit HOW-to-save examples. Vagueness comes from scenarios (user requests), not system prompts.",
    "nl_format": "Natural English (e.g., 'I'll save X to the codebase category')",
    "structured_format": "save-memory \"content\" \"category\""
  },
  "conditions": {
    "nl": "Natural language intent via [SAVE: category] tags",
    "structured": "Structured tool call via save-memory command"
  },
  "metrics": {
    "structured": {
      "recall": 0.0,
      "false_positive_rate": 0,
      "ci_95": [
        0,
        0.43449149475208104
      ],
      "true_positives": 0,
      "false_positives": 0,
      "n_positive_scenarios": 5,
      "n_negative_scenarios": 0
    },
    "nl": {
      "recall": 1.0,
      "false_positive_rate": 0,
      "ci_95": [
        0.5655085052479191,
        1
      ],
      "true_positives": 5,
      "false_positives": 0,
      "n_positive_scenarios": 5,
      "n_negative_scenarios": 0
    }
  },
  "scenario_level_analysis": {
    "description": "PRIMARY analysis - treats scenario as unit (statistically defensible)",
    "n_scenarios": 1,
    "nl_better_count": 1,
    "st_better_count": 0,
    "ties_count": 0,
    "median_diff_pp": 100.0,
    "mean_diff_pp": 100.0,
    "sign_test_p": 1.0,
    "wilcoxon_p": null,
    "bonferroni_alpha": 0.00625
  },
  "trial_level_comparison": {
    "description": "SECONDARY analysis - treats trials as independent (p-values may be inflated)",
    "caveat": "Trials within a scenario are correlated; use scenario-level analysis for valid inference",
    "nl_minus_structured_pp": 100.0,
    "mcnemar_chi_sq": 3.2,
    "mcnemar_p_value": 0.07363827012030295,
    "nl_wins": 5,
    "structured_wins": 0,
    "both_succeed": 0,
    "both_fail": 0
  },
  "power_analysis": {
    "observed_effect": 1.0,
    "power_observed": 0.609,
    "required_n_80_power": 8,
    "required_n_90_power": 11,
    "min_detectable_effect_80": 1.253,
    "p_discordant_estimate": 1.0,
    "current_n": 5
  },
  "verification_language": {
    "nl_overall_rate": 0.0,
    "st_overall_rate": 0.0,
    "nl_verif_count": 0,
    "st_verif_count": 0,
    "nl_failure_verif_rate": null,
    "st_failure_verif_rate": 0.0
  },
  "fidelity": null,
  "familiarity": null,
  "results": [
    {
      "scenario_id": "mem_implicit_006",
      "condition": "structured",
      "query": "kit is deploy",
      "expected_action": true,
      "detected_intent": false,
      "tool_called": false,
      "success": false,
      "intent_phrases": [],
      "tool_content": null,
      "response_text": "I'm not sure I understand what you mean by \"kit is deploy\". Could you provide more context?\n\nAre you:\n1. Asking about a deployment toolkit or process?\n2. Telling me about a project or tool called \"kit\" that handles deployments?\n3. Trying to run a deployment command?\n4. Something else?\n\nPlease let me know what you'd like to accomplish and I'll be happy to help!",
      "is_control": false,
      "trial_number": 1,
      "is_true_positive": false,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": true,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null,
      "has_verification_language": false
    },
    {
      "scenario_id": "mem_implicit_006",
      "condition": "nl",
      "query": "kit is deploy",
      "expected_action": true,
      "detected_intent": true,
      "tool_called": false,
      "success": true,
      "intent_phrases": [
        "I'll remember",
        "I'll save"
      ],
      "tool_content": "I'll remember that for you.\n\nI'll save that \"kit is deploy\" - this appears to be a shorthand or alias where \"kit\" refers to deployment operations.\n\nIs there any additional context you'd like me to rem",
      "response_text": "I'll remember that for you.\n\nI'll save that \"kit is deploy\" - this appears to be a shorthand or alias where \"kit\" refers to deployment operations.\n\nIs there any additional context you'd like me to remember about this? For example:\n- Is this a CLI command or tool?\n- What system or project does it relate to?\n- Any specific deployment targets or configurations?",
      "is_control": false,
      "trial_number": 1,
      "is_true_positive": true,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": false,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null,
      "has_verification_language": false
    },
    {
      "scenario_id": "mem_implicit_006",
      "condition": "structured",
      "query": "kit is deploy",
      "expected_action": true,
      "detected_intent": false,
      "tool_called": false,
      "success": false,
      "intent_phrases": [],
      "tool_content": null,
      "response_text": "I'm not sure I understand what you mean by \"kit is deploy\". Could you clarify what you're looking for?\n\nAre you:\n1. Asking about deploying something called \"kit\"?\n2. Telling me that a tool/project named \"kit\" handles deployment?\n3. Looking to set up or configure a deployment workflow?\n4. Something else entirely?\n\nPlease provide more context so I can help you effectively!",
      "is_control": false,
      "trial_number": 2,
      "is_true_positive": false,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": true,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null,
      "has_verification_language": false
    },
    {
      "scenario_id": "mem_implicit_006",
      "condition": "nl",
      "query": "kit is deploy",
      "expected_action": true,
      "detected_intent": true,
      "tool_called": false,
      "success": true,
      "intent_phrases": [
        "I'll remember",
        "I'll save"
      ],
      "tool_content": "I'll remember that for you.\n\nI'll save that \"kit is deploy\" - this appears to be a command or alias where `kit` refers to deployment functionality.\n\nIs there any additional context you'd like me to re",
      "response_text": "I'll remember that for you.\n\nI'll save that \"kit is deploy\" - this appears to be a command or alias where `kit` refers to deployment functionality.\n\nIs there any additional context you'd like me to remember about this? For example:\n- Is this a CLI tool or script?\n- What does it deploy (e.g., to a specific environment or platform)?\n- Are there specific flags or options you commonly use with it?",
      "is_control": false,
      "trial_number": 2,
      "is_true_positive": true,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": false,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null,
      "has_verification_language": false
    },
    {
      "scenario_id": "mem_implicit_006",
      "condition": "nl",
      "query": "kit is deploy",
      "expected_action": true,
      "detected_intent": true,
      "tool_called": false,
      "success": true,
      "intent_phrases": [
        "I'll save",
        "I'll remember"
      ],
      "tool_content": "I'll save that information for future reference.\n\nI'll remember that \"kit is deploy\" - this appears to be a note that \"kit\" refers to or is used for deployment in your workflow/codebase.\n\nIs there any",
      "response_text": "I'll save that information for future reference.\n\nI'll remember that \"kit is deploy\" - this appears to be a note that \"kit\" refers to or is used for deployment in your workflow/codebase.\n\nIs there any additional context you'd like me to save about this, such as:\n- What kind of deployment (e.g., production, staging)?\n- What technology or platform kit deploys to?\n- Any specific commands or configurations?",
      "is_control": false,
      "trial_number": 3,
      "is_true_positive": true,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": false,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null,
      "has_verification_language": false
    },
    {
      "scenario_id": "mem_implicit_006",
      "condition": "structured",
      "query": "kit is deploy",
      "expected_action": true,
      "detected_intent": false,
      "tool_called": false,
      "success": false,
      "intent_phrases": [],
      "tool_content": null,
      "response_text": "I'm not sure I understand what you mean by \"kit is deploy\". Could you clarify what you're looking for? Here are a few possibilities:\n\n1. **Are you telling me about a tool/project called \"kit\"** that handles deployments? If so, I can save that information for future reference.\n\n2. **Are you asking me to deploy something** using a tool called \"kit\"?\n\n3. **Is this a command you want me to run**, like `kit deploy`?\n\n4. **Something else entirely?**\n\nPlease let me know more details about what you'd like to do!",
      "is_control": false,
      "trial_number": 3,
      "is_true_positive": false,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": true,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null,
      "has_verification_language": false
    },
    {
      "scenario_id": "mem_implicit_006",
      "condition": "structured",
      "query": "kit is deploy",
      "expected_action": true,
      "detected_intent": false,
      "tool_called": false,
      "success": false,
      "intent_phrases": [],
      "tool_content": null,
      "response_text": "I'm not sure I understand what you mean by \"kit is deploy\". Could you please clarify what you're looking for? Here are a few possibilities:\n\n1. **Are you asking about a deployment kit or tool?** - If so, which one? (e.g., AWS CDK, Serverless Framework, etc.)\n\n2. **Is \"kit\" a project or codebase you're working with?** - If so, I can help you explore it or deploy it.\n\n3. **Are you giving me a command or shorthand?** - Please provide more context about what you'd like me to do.\n\n4. **Is this a typo or autocomplete error?** - Feel free to rephrase your request.\n\nLet me know how I can help!",
      "is_control": false,
      "trial_number": 4,
      "is_true_positive": false,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": true,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null,
      "has_verification_language": false
    },
    {
      "scenario_id": "mem_implicit_006",
      "condition": "nl",
      "query": "kit is deploy",
      "expected_action": true,
      "detected_intent": true,
      "tool_called": false,
      "success": true,
      "intent_phrases": [
        "I'll save",
        "I'll remember"
      ],
      "tool_content": "I'll save that information for future reference.\n\nI'll remember that \"kit is deploy\" - this seems to be a note about your deployment tool or command. If you meant something more specific (like \"kit\" b",
      "response_text": "I'll save that information for future reference.\n\nI'll remember that \"kit is deploy\" - this seems to be a note about your deployment tool or command. If you meant something more specific (like \"kit\" being a CLI tool, a script name, or a particular deployment workflow), feel free to clarify and I can update the note with more context.",
      "is_control": false,
      "trial_number": 4,
      "is_true_positive": true,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": false,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null,
      "has_verification_language": false
    },
    {
      "scenario_id": "mem_implicit_006",
      "condition": "structured",
      "query": "kit is deploy",
      "expected_action": true,
      "detected_intent": false,
      "tool_called": false,
      "success": false,
      "intent_phrases": [],
      "tool_content": null,
      "response_text": "I understand you want to deploy something called \"kit\", but I need a bit more context to help you effectively.\n\nCould you clarify:\n\n1. **What is \"kit\"?** Is it:\n   - A specific project/application in your codebase?\n   - A CLI tool or framework?\n   - Something else?\n\n2. **Where do you want to deploy it?** For example:\n   - A cloud provider (AWS, GCP, Azure, Vercel, etc.)?\n   - A specific environment (staging, production)?\n   - A container registry?\n\n3. **How is deployment typically done?** Do you have:\n   - Deployment scripts in your project?\n   - CI/CD configuration?\n   - A specific command you usually run?\n\nIf you'd like, I can also explore your current directory to look for deployment configurations, scripts, or a project named \"kit\". Just let me know!",
      "is_control": false,
      "trial_number": 5,
      "is_true_positive": false,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": true,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null,
      "has_verification_language": false
    },
    {
      "scenario_id": "mem_implicit_006",
      "condition": "nl",
      "query": "kit is deploy",
      "expected_action": true,
      "detected_intent": true,
      "tool_called": false,
      "success": true,
      "intent_phrases": [
        "I'll remember",
        "save that",
        "that"
      ],
      "tool_content": "I'll remember that for you.\n\nI've saved that \"kit is deploy\" - this appears to be a command or alias where `kit` is used for deployment. If you'd like to provide more context about this (like what sys",
      "response_text": "I'll remember that for you.\n\nI've saved that \"kit is deploy\" - this appears to be a command or alias where `kit` is used for deployment. If you'd like to provide more context about this (like what system or tool this relates to, or how it's used), I can save that additional information as well.",
      "is_control": false,
      "trial_number": 5,
      "is_true_positive": true,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": false,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null,
      "has_verification_language": false
    }
  ]
}