{
  "metadata": {
    "timestamp": "20260202_182323",
    "experiment": "nl_vs_structured_tool_calling",
    "version": "v5_review_fixes",
    "num_trials": 5,
    "include_controls": true,
    "seed": 42,
    "n_positive": 1,
    "n_negative": 0,
    "total_observations": 10,
    "failed_trials_count": 0,
    "failed_trials": null
  },
  "design": {
    "description": "Both conditions receive identical WHEN-to-save guidance and equally explicit HOW-to-save examples. Vagueness comes from scenarios (user requests), not system prompts.",
    "nl_format": "Natural English (e.g., 'I'll save X to the codebase category')",
    "structured_format": "save-memory \"content\" \"category\""
  },
  "conditions": {
    "nl": "Natural language intent via [SAVE: category] tags",
    "structured": "Structured tool call via save-memory command"
  },
  "metrics": {
    "structured": {
      "recall": 1.0,
      "false_positive_rate": 0,
      "ci_95": [
        0.5655085052479191,
        1
      ],
      "true_positives": 5,
      "false_positives": 0,
      "n_positive_scenarios": 5,
      "n_negative_scenarios": 0
    },
    "nl": {
      "recall": 1.0,
      "false_positive_rate": 0,
      "ci_95": [
        0.5655085052479191,
        1
      ],
      "true_positives": 5,
      "false_positives": 0,
      "n_positive_scenarios": 5,
      "n_negative_scenarios": 0
    }
  },
  "scenario_level_analysis": {
    "description": "PRIMARY analysis - treats scenario as unit (statistically defensible)",
    "n_scenarios": 1,
    "nl_better_count": 0,
    "st_better_count": 0,
    "ties_count": 1,
    "median_diff_pp": 0.0,
    "mean_diff_pp": 0.0,
    "sign_test_p": 1.0,
    "wilcoxon_p": null,
    "bonferroni_alpha": 0.00625
  },
  "trial_level_comparison": {
    "description": "SECONDARY analysis - treats trials as independent (p-values may be inflated)",
    "caveat": "Trials within a scenario are correlated; use scenario-level analysis for valid inference",
    "nl_minus_structured_pp": 0.0,
    "mcnemar_chi_sq": 0.0,
    "mcnemar_p_value": 1.0,
    "nl_wins": 0,
    "structured_wins": 0,
    "both_succeed": 5,
    "both_fail": 0
  },
  "power_analysis": {
    "observed_effect": 0.0,
    "power_observed": 0.0,
    "required_n_80_power": Infinity,
    "required_n_90_power": Infinity,
    "message": "No effect observed; power analysis not meaningful"
  },
  "verification_language": {
    "nl_overall_rate": 0.0,
    "st_overall_rate": 0.0,
    "nl_verif_count": 0,
    "st_verif_count": 0,
    "nl_failure_verif_rate": null,
    "st_failure_verif_rate": null
  },
  "fidelity": {
    "nl_wins": 4,
    "structured_wins": 0,
    "ties": 1,
    "total": 5,
    "consistent_count": 4,
    "inconsistent_count": 1,
    "consistency_rate": 0.8,
    "comparisons": [
      {
        "scenario_id": "mem_implicit_000",
        "trial": 1,
        "winner": "nl",
        "reason": "AB: Content A more accurately captures the user's brief statement without over-interpreting it, while Content B adds unnecessary speculation (\"likely\" and \"where 'p' refers to database\") that wasn't in the original message - the user simply stated \"p is db\" which could mean many things (a variable assignment, an alias, etc.). | BA: Both capture the same interpretation, but B is more concise and doesn't add speculative language (\"likely\") that wasn't in the original message, while A's parenthetical hedging introduces unnecessary uncertainty about what the user stated as a fact.",
        "ab_winner": "nl",
        "ba_winner": "nl",
        "consistent": true,
        "nl_content": "p is db (shorthand/alias for database)",
        "structured_content": "<save-memory category=\"user_preference\">p is db (likely a shorthand/alias where 'p' refers to database)</save-memory>"
      },
      {
        "scenario_id": "mem_implicit_000",
        "trial": 2,
        "winner": "nl",
        "reason": "AB: Content A accurately captures the user's statement without adding speculative interpretation, while Content B adds hallucinated context (\"likely a shorthand/alias preference\") that wasn't in the original message. | BA: Both capture the core information, but A adds speculative interpretation (\"likely a shorthand/alias preference\") that wasn't stated in the original message, while B sticks to what was actually said without hallucinating context.",
        "ab_winner": "nl",
        "ba_winner": "nl",
        "consistent": true,
        "nl_content": "p refers to the database (db)",
        "structured_content": "<save-memory category=\"user_preference\">p is db (likely a shorthand/alias preference where \"p\" refers to \"db\" or database)</save-memory>"
      },
      {
        "scenario_id": "mem_implicit_000",
        "trial": 3,
        "winner": "nl",
        "reason": "AB: Content A accurately preserves exactly what the user said without adding speculative interpretation, while Content B adds hallucinated information (\"likely shorthand for...\") that wasn't in the original message. | BA: Content B captures exactly what the user said without adding speculative interpretation, while Content A adds a hallucinated explanation (\"likely shorthand for...\") that wasn't in the original message.",
        "ab_winner": "nl",
        "ba_winner": "nl",
        "consistent": true,
        "nl_content": "p is db",
        "structured_content": "<save-memory category=\"user_preference\">p is db (likely shorthand for: \"p\" refers to database or a database-related alias/variable)</save-memory>"
      },
      {
        "scenario_id": "mem_implicit_000",
        "trial": 4,
        "winner": "tie",
        "reason": "AB: Content A accurately captures the user's statement with a reasonable parenthetical clarification, while Content B adds speculative interpretations (\"variable name convention, alias, or project-specific abbreviation\") that weren't stated by the user. | BA: Content A more accurately preserves the ambiguity of the user's statement by noting it's \"likely shorthand\" without definitively claiming what \"db\" means, while Content B incorrectly assumes \"db\" means \"database\" when the user may have meant something else (like a variable name, alias, or other abbreviation).",
        "ab_winner": "nl",
        "ba_winner": "structured",
        "consistent": false,
        "nl_content": "p is db (shorthand for database)",
        "structured_content": "<save-memory category=\"user_preference\">p is db (likely shorthand: \"p\" refers to \"db\" - possibly a variable name convention, alias, or project-specific abbreviation)</save-memory>"
      },
      {
        "scenario_id": "mem_implicit_000",
        "trial": 5,
        "winner": "nl",
        "reason": "AB: Content A accurately preserves exactly what the user said without adding speculative interpretation, while Content B hallucinates an explanation (\"likely a shorthand or alias reference\") that wasn't stated by the user. | BA: Content B accurately preserves the exact user statement without adding speculative interpretation, while Content A adds hallucinated context (\"likely a shorthand or alias reference\" and \"database\") that the user never stated.",
        "ab_winner": "nl",
        "ba_winner": "nl",
        "consistent": true,
        "nl_content": "p is db",
        "structured_content": "<save-memory category=\"user_preference\">p is db (likely a shorthand or alias reference - \"p\" refers to \"db\"/database)</save-memory>"
      }
    ]
  },
  "familiarity": null,
  "results": [
    {
      "scenario_id": "mem_implicit_000",
      "condition": "structured",
      "query": "p is db",
      "expected_action": true,
      "detected_intent": false,
      "tool_called": true,
      "success": true,
      "intent_phrases": [],
      "tool_content": "<save-memory category=\"user_preference\">p is db (likely a shorthand/alias where 'p' refers to database)</save-memory>",
      "response_text": "<save-memory category=\"user_preference\">p is db (likely a shorthand/alias where 'p' refers to database)</save-memory>\n\nGot it! I've noted that \"p is db\" - I'll remember this shorthand for future reference.",
      "is_control": false,
      "trial_number": 1,
      "is_true_positive": true,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": false,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null,
      "has_verification_language": false
    },
    {
      "scenario_id": "mem_implicit_000",
      "condition": "nl",
      "query": "p is db",
      "expected_action": true,
      "detected_intent": true,
      "tool_called": false,
      "success": true,
      "intent_phrases": [
        "I'll save",
        "I'll remember"
      ],
      "tool_content": "I'll save that \"p\" refers to the database (db) in your project or workflow.\n\nI'll remember that \"p\" is your shorthand or alias for the database.",
      "response_text": "I'll save that \"p\" refers to the database (db) in your project or workflow.\n\nI'll remember that \"p\" is your shorthand or alias for the database.",
      "is_control": false,
      "trial_number": 1,
      "is_true_positive": true,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": false,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null,
      "has_verification_language": false
    },
    {
      "scenario_id": "mem_implicit_000",
      "condition": "structured",
      "query": "p is db",
      "expected_action": true,
      "detected_intent": false,
      "tool_called": true,
      "success": true,
      "intent_phrases": [],
      "tool_content": "<save-memory category=\"user_preference\">p is db (likely a shorthand/alias preference where \"p\" refers to \"db\" or database)</save-memory>",
      "response_text": "<save-memory category=\"user_preference\">p is db (likely a shorthand/alias preference where \"p\" refers to \"db\" or database)</save-memory>\n\nGot it, I've saved that `p` refers to `db` for future reference.",
      "is_control": false,
      "trial_number": 2,
      "is_true_positive": true,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": false,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null,
      "has_verification_language": false
    },
    {
      "scenario_id": "mem_implicit_000",
      "condition": "nl",
      "query": "p is db",
      "expected_action": true,
      "detected_intent": true,
      "tool_called": false,
      "success": true,
      "intent_phrases": [
        "I'll save",
        "I'll remember"
      ],
      "tool_content": "I'll save that \"p\" refers to the database (db) in your project or workflow.\n\nI'll remember that \"p\" is your shorthand for the database.",
      "response_text": "I'll save that \"p\" refers to the database (db) in your project or workflow.\n\nI'll remember that \"p\" is your shorthand for the database.",
      "is_control": false,
      "trial_number": 2,
      "is_true_positive": true,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": false,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null,
      "has_verification_language": false
    },
    {
      "scenario_id": "mem_implicit_000",
      "condition": "nl",
      "query": "p is db",
      "expected_action": true,
      "detected_intent": true,
      "tool_called": false,
      "success": true,
      "intent_phrases": [
        "I'll save",
        "I'll remember"
      ],
      "tool_content": "I'll save that \"p\" refers to the database (db) in your codebase or workflow.\n\nI'll remember that \"p\" is your shorthand or alias for the database.",
      "response_text": "I'll save that \"p\" refers to the database (db) in your codebase or workflow.\n\nI'll remember that \"p\" is your shorthand or alias for the database.",
      "is_control": false,
      "trial_number": 3,
      "is_true_positive": true,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": false,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null,
      "has_verification_language": false
    },
    {
      "scenario_id": "mem_implicit_000",
      "condition": "structured",
      "query": "p is db",
      "expected_action": true,
      "detected_intent": false,
      "tool_called": true,
      "success": true,
      "intent_phrases": [],
      "tool_content": "<save-memory category=\"user_preference\">p is db (likely shorthand for: \"p\" refers to database or a database-related alias/variable)</save-memory>",
      "response_text": "<save-memory category=\"user_preference\">p is db (likely shorthand for: \"p\" refers to database or a database-related alias/variable)</save-memory>\n\nGot it! I've saved that \"p is db\" for future reference. If you meant something more specific (like \"p\" being a database connection variable, alias, or something else), feel free to clarify and I'll update the note.",
      "is_control": false,
      "trial_number": 3,
      "is_true_positive": true,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": false,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null,
      "has_verification_language": false
    },
    {
      "scenario_id": "mem_implicit_000",
      "condition": "structured",
      "query": "p is db",
      "expected_action": true,
      "detected_intent": false,
      "tool_called": true,
      "success": true,
      "intent_phrases": [],
      "tool_content": "<save-memory category=\"user_preference\">p is db (likely shorthand: \"p\" refers to \"db\" - possibly a variable name convention, alias, or project-specific abbreviation)</save-memory>",
      "response_text": "<save-memory category=\"user_preference\">p is db (likely shorthand: \"p\" refers to \"db\" - possibly a variable name convention, alias, or project-specific abbreviation)</save-memory>\n\nGot it! I've saved that `p` refers to `db`. This will help me remember this convention in future conversations.",
      "is_control": false,
      "trial_number": 4,
      "is_true_positive": true,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": false,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null,
      "has_verification_language": false
    },
    {
      "scenario_id": "mem_implicit_000",
      "condition": "nl",
      "query": "p is db",
      "expected_action": true,
      "detected_intent": true,
      "tool_called": false,
      "success": true,
      "intent_phrases": [
        "I'll save",
        "I'll remember"
      ],
      "tool_content": "I'll save that \"p\" refers to the database (db) in your codebase or workflow.\n\nI'll remember that \"p\" is your shorthand for the database.",
      "response_text": "I'll save that \"p\" refers to the database (db) in your codebase or workflow.\n\nI'll remember that \"p\" is your shorthand for the database.",
      "is_control": false,
      "trial_number": 4,
      "is_true_positive": true,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": false,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null,
      "has_verification_language": false
    },
    {
      "scenario_id": "mem_implicit_000",
      "condition": "structured",
      "query": "p is db",
      "expected_action": true,
      "detected_intent": false,
      "tool_called": true,
      "success": true,
      "intent_phrases": [],
      "tool_content": "<save-memory category=\"user_preference\">p is db (likely a shorthand or alias reference - \"p\" refers to \"db\"/database)</save-memory>",
      "response_text": "<save-memory category=\"user_preference\">p is db (likely a shorthand or alias reference - \"p\" refers to \"db\"/database)</save-memory>\n\nGot it! I've saved that \"p is db\" for future reference.",
      "is_control": false,
      "trial_number": 5,
      "is_true_positive": true,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": false,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null,
      "has_verification_language": false
    },
    {
      "scenario_id": "mem_implicit_000",
      "condition": "nl",
      "query": "p is db",
      "expected_action": true,
      "detected_intent": true,
      "tool_called": false,
      "success": true,
      "intent_phrases": [
        "I'll save",
        "I'll remember"
      ],
      "tool_content": "I'll save that \"p\" refers to \"db\" (database) in your context.\n\nI'll remember that \"p\" is your shorthand for \"db\" (database).",
      "response_text": "I'll save that \"p\" refers to \"db\" (database) in your context.\n\nI'll remember that \"p\" is your shorthand for \"db\" (database).",
      "is_control": false,
      "trial_number": 5,
      "is_true_positive": true,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": false,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null,
      "has_verification_language": false
    }
  ]
}