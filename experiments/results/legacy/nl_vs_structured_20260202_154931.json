{
  "metadata": {
    "timestamp": "20260202_154931",
    "experiment": "nl_vs_structured_tool_calling",
    "version": "v5_review_fixes",
    "num_trials": 5,
    "include_controls": true,
    "seed": 42,
    "n_positive": 1,
    "n_negative": 0,
    "total_observations": 10,
    "failed_trials_count": 0,
    "failed_trials": null
  },
  "design": {
    "description": "Both conditions receive identical WHEN-to-save guidance and equally explicit HOW-to-save examples. Vagueness comes from scenarios (user requests), not system prompts.",
    "nl_format": "Natural English (e.g., 'I'll save X to the codebase category')",
    "structured_format": "save-memory \"content\" \"category\""
  },
  "conditions": {
    "nl": "Natural language intent via [SAVE: category] tags",
    "structured": "Structured tool call via save-memory command"
  },
  "metrics": {
    "structured": {
      "recall": 0.4,
      "false_positive_rate": 0,
      "ci_95": [
        0.1176182311592533,
        0.769280067791163
      ],
      "true_positives": 2,
      "false_positives": 0,
      "n_positive_scenarios": 5,
      "n_negative_scenarios": 0
    },
    "nl": {
      "recall": 1.0,
      "false_positive_rate": 0,
      "ci_95": [
        0.5655085052479191,
        1
      ],
      "true_positives": 5,
      "false_positives": 0,
      "n_positive_scenarios": 5,
      "n_negative_scenarios": 0
    }
  },
  "scenario_level_analysis": {
    "description": "PRIMARY analysis - treats scenario as unit (statistically defensible)",
    "n_scenarios": 1,
    "nl_better_count": 1,
    "st_better_count": 0,
    "ties_count": 0,
    "median_diff_pp": 60.0,
    "mean_diff_pp": 60.0,
    "sign_test_p": 1.0,
    "wilcoxon_p": null,
    "bonferroni_alpha": 0.00625
  },
  "trial_level_comparison": {
    "description": "SECONDARY analysis - treats trials as independent (p-values may be inflated)",
    "caveat": "Trials within a scenario are correlated; use scenario-level analysis for valid inference",
    "nl_minus_structured_pp": 60.0,
    "mcnemar_chi_sq": 1.3333333333333333,
    "mcnemar_p_value": 0.24821307898992026,
    "nl_wins": 3,
    "structured_wins": 0,
    "both_succeed": 2,
    "both_fail": 0
  },
  "power_analysis": {
    "observed_effect": 0.6,
    "power_observed": 0.41,
    "required_n_80_power": 14,
    "required_n_90_power": 18,
    "min_detectable_effect_80": 0.97,
    "p_discordant_estimate": 0.6,
    "current_n": 5
  },
  "verification_language": {
    "nl_overall_rate": 0.0,
    "st_overall_rate": 0.0,
    "nl_verif_count": 0,
    "st_verif_count": 0,
    "nl_failure_verif_rate": null,
    "st_failure_verif_rate": 0.0
  },
  "fidelity": {
    "nl_wins": 0,
    "structured_wins": 0,
    "ties": 2,
    "total": 2,
    "consistent_count": 0,
    "inconsistent_count": 2,
    "consistency_rate": 0.0,
    "comparisons": [
      {
        "scenario_id": "mem_implicit_004",
        "trial": 1,
        "winner": "tie",
        "reason": "AB: Content B more accurately preserves the original notation \"~100/60\" without interpreting what the denominator means, while Content A assumes \"60\" refers to seconds and adds the interpretation \"100/minute\" which may not be what the user intended (60 could refer to something else entirely). | BA: Both contents make the same reasonable interpretation that \"~100/60\" refers to a rate limit of approximately 100 requests per 60 seconds, though the original message was ambiguous and could have meant something else entirely (like a heart rate or other ratio).",
        "ab_winner": "structured",
        "ba_winner": "tie",
        "consistent": false,
        "nl_content": "rate limit is approximately 100 requests per 60 seconds (or about 100/minute)",
        "structured_content": "<save-memory category=\"constraint\">Rate limit is approximately 100 requests per 60 seconds (~100/60)</save-memory>"
      },
      {
        "scenario_id": "mem_implicit_004",
        "trial": 2,
        "winner": "tie",
        "reason": "AB: Both correctly capture the \"~100/60\" rate information from the user message - A interprets it as \"100 per 60 seconds\" while B frames it as \"100 requests per 60 seconds\", and neither adds incorrect information, though both make reasonable assumptions about the context (requests/rate limit) that weren't explicitly stated. | BA: Content A incorrectly assumes \"rate\" refers to \"requests\" and adds \"Rate limit\" which wasn't specified in the original message, while Content B accurately captures the ratio without adding assumptions about what the rate measures.",
        "ab_winner": "tie",
        "ba_winner": "nl",
        "consistent": false,
        "nl_content": "rate is approximately 100 per 60 seconds (or about 100/minute)",
        "structured_content": "<save-memory category=\"constraint\">Rate limit is approximately 100 requests per 60 seconds (~100/60)</save-memory>"
      }
    ]
  },
  "familiarity": null,
  "results": [
    {
      "scenario_id": "mem_implicit_004",
      "condition": "structured",
      "query": "rate is ~100/60",
      "expected_action": true,
      "detected_intent": false,
      "tool_called": true,
      "success": true,
      "intent_phrases": [],
      "tool_content": "<save-memory category=\"constraint\">Rate limit is approximately 100 requests per 60 seconds (~100/60)</save-memory>",
      "response_text": "I'll save that information about the rate limit.\n\n<save-memory category=\"constraint\">Rate limit is approximately 100 requests per 60 seconds (~100/60)</save-memory>\n\nGot it! I've noted that the rate is ~100/60 (approximately 100 requests per 60 seconds). Is there anything specific you'd like me to help you with regarding this rate limit, such as implementing rate limiting logic or working around it?",
      "is_control": false,
      "trial_number": 1,
      "is_true_positive": true,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": false,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null,
      "has_verification_language": false
    },
    {
      "scenario_id": "mem_implicit_004",
      "condition": "nl",
      "query": "rate is ~100/60",
      "expected_action": true,
      "detected_intent": true,
      "tool_called": false,
      "success": true,
      "intent_phrases": [
        "I'll remember",
        "I'll save"
      ],
      "tool_content": "I'll remember that information for you.\n\nI'll save that your rate limit is approximately 100 requests per 60 seconds (or about 100/minute).\n\nIs there additional context you'd like me to note about thi",
      "response_text": "I'll remember that information for you.\n\nI'll save that your rate limit is approximately 100 requests per 60 seconds (or about 100/minute).\n\nIs there additional context you'd like me to note about this rate limit? For example:\n- Which API or service this applies to\n- Whether this is a hard limit or soft limit\n- Any specific handling you prefer when approaching the limit",
      "is_control": false,
      "trial_number": 1,
      "is_true_positive": true,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": false,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null,
      "has_verification_language": false
    },
    {
      "scenario_id": "mem_implicit_004",
      "condition": "structured",
      "query": "rate is ~100/60",
      "expected_action": true,
      "detected_intent": false,
      "tool_called": true,
      "success": true,
      "intent_phrases": [],
      "tool_content": "<save-memory category=\"constraint\">Rate limit is approximately 100 requests per 60 seconds (~100/60)</save-memory>",
      "response_text": "I'll save that information about the rate limit.\n\n<save-memory category=\"constraint\">Rate limit is approximately 100 requests per 60 seconds (~100/60)</save-memory>\n\nGot it! I've noted that the rate is ~100/60 (approximately 100 requests per 60 seconds). Is this a rate limit for a specific API or service you're working with? Let me know if you need help implementing rate limiting logic or if there's anything else you'd like me to remember about this constraint.",
      "is_control": false,
      "trial_number": 2,
      "is_true_positive": true,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": false,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null,
      "has_verification_language": false
    },
    {
      "scenario_id": "mem_implicit_004",
      "condition": "nl",
      "query": "rate is ~100/60",
      "expected_action": true,
      "detected_intent": true,
      "tool_called": false,
      "success": true,
      "intent_phrases": [
        "I'll remember",
        "I'll save"
      ],
      "tool_content": "I'll remember that rate limit information for you.\n\nI'll save that the rate is approximately 100 per 60 seconds (or about 100/minute).\n\nIs this a rate limit for a specific API, service, or system you'",
      "response_text": "I'll remember that rate limit information for you.\n\nI'll save that the rate is approximately 100 per 60 seconds (or about 100/minute).\n\nIs this a rate limit for a specific API, service, or system you're working with? If you let me know the context, I can save a more detailed note for future reference.",
      "is_control": false,
      "trial_number": 2,
      "is_true_positive": true,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": false,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null,
      "has_verification_language": false
    },
    {
      "scenario_id": "mem_implicit_004",
      "condition": "nl",
      "query": "rate is ~100/60",
      "expected_action": true,
      "detected_intent": true,
      "tool_called": false,
      "success": true,
      "intent_phrases": [
        "I'll save",
        "I'll remember"
      ],
      "tool_content": "I'll save that information for you.\n\nI'll remember that your rate limit is approximately 100 requests per 60 seconds (or about 100/minute).\n\nIs this a rate limit for a specific API or service you're w",
      "response_text": "I'll save that information for you.\n\nI'll remember that your rate limit is approximately 100 requests per 60 seconds (or about 100/minute).\n\nIs this a rate limit for a specific API or service you're working with? If you give me more context, I can save a more detailed note for future reference.",
      "is_control": false,
      "trial_number": 3,
      "is_true_positive": true,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": false,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null,
      "has_verification_language": false
    },
    {
      "scenario_id": "mem_implicit_004",
      "condition": "structured",
      "query": "rate is ~100/60",
      "expected_action": true,
      "detected_intent": false,
      "tool_called": false,
      "success": false,
      "intent_phrases": [],
      "tool_content": null,
      "response_text": "I understand you're sharing a rate of approximately 100/60. This could refer to several things - perhaps a heart rate, blood pressure reading, API rate limit, or some other metric.\n\nCould you provide a bit more context about what this rate refers to? That way I can better assist you or save this information appropriately for future reference.",
      "is_control": false,
      "trial_number": 3,
      "is_true_positive": false,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": true,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null,
      "has_verification_language": false
    },
    {
      "scenario_id": "mem_implicit_004",
      "condition": "structured",
      "query": "rate is ~100/60",
      "expected_action": true,
      "detected_intent": false,
      "tool_called": false,
      "success": false,
      "intent_phrases": [],
      "tool_content": null,
      "response_text": "I understand you're sharing a rate of approximately 100/60. This could refer to a few different things - could you clarify what this rate represents?\n\nFor example, is this:\n- A heart rate / blood pressure reading?\n- An API rate limit (100 requests per 60 seconds)?\n- Some other metric in your system?\n\nIf this is a rate limit or constraint I should remember for your project, please let me know the context and I'll save it for future reference.",
      "is_control": false,
      "trial_number": 4,
      "is_true_positive": false,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": true,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null,
      "has_verification_language": false
    },
    {
      "scenario_id": "mem_implicit_004",
      "condition": "nl",
      "query": "rate is ~100/60",
      "expected_action": true,
      "detected_intent": true,
      "tool_called": false,
      "success": true,
      "intent_phrases": [
        "I'll remember",
        "I'll save"
      ],
      "tool_content": "I'll remember that for you.\n\nI'll save that your rate limit is approximately 100 requests per 60 seconds (or about 100/minute).\n\nIs this related to a specific API or service you're working with? If yo",
      "response_text": "I'll remember that for you.\n\nI'll save that your rate limit is approximately 100 requests per 60 seconds (or about 100/minute).\n\nIs this related to a specific API or service you're working with? If you let me know more context, I can save a more detailed note for future reference.",
      "is_control": false,
      "trial_number": 4,
      "is_true_positive": true,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": false,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null,
      "has_verification_language": false
    },
    {
      "scenario_id": "mem_implicit_004",
      "condition": "structured",
      "query": "rate is ~100/60",
      "expected_action": true,
      "detected_intent": false,
      "tool_called": false,
      "success": false,
      "intent_phrases": [],
      "tool_content": null,
      "response_text": "I understand you're sharing a rate of approximately 100/60. This could be interpreted a few ways - it might be:\n\n- A blood pressure reading (100/60 mmHg - which would be on the lower/normal side)\n- A ratio or rate for some calculation (\u22481.67)\n- An API rate limit (100 requests per 60 seconds)\n- Something else entirely\n\nCould you provide a bit more context about what this rate refers to? That way I can help you more effectively!",
      "is_control": false,
      "trial_number": 5,
      "is_true_positive": false,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": true,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null,
      "has_verification_language": false
    },
    {
      "scenario_id": "mem_implicit_004",
      "condition": "nl",
      "query": "rate is ~100/60",
      "expected_action": true,
      "detected_intent": true,
      "tool_called": false,
      "success": true,
      "intent_phrases": [
        "I'll save",
        "I'll remember"
      ],
      "tool_content": "I'll save that information for you.\n\nI'll remember that your rate limit is approximately 100 requests per 60 seconds (about 100/minute).",
      "response_text": "I'll save that information for you.\n\nI'll remember that your rate limit is approximately 100 requests per 60 seconds (about 100/minute).",
      "is_control": false,
      "trial_number": 5,
      "is_true_positive": true,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": false,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null,
      "has_verification_language": false
    }
  ]
}