{
  "metadata": {
    "timestamp": "20260202_180854",
    "experiment": "nl_vs_structured_tool_calling",
    "version": "v5_review_fixes",
    "num_trials": 5,
    "include_controls": true,
    "seed": 42,
    "n_positive": 1,
    "n_negative": 0,
    "total_observations": 10,
    "failed_trials_count": 0,
    "failed_trials": null
  },
  "design": {
    "description": "Both conditions receive identical WHEN-to-save guidance and equally explicit HOW-to-save examples. Vagueness comes from scenarios (user requests), not system prompts.",
    "nl_format": "Natural English (e.g., 'I'll save X to the codebase category')",
    "structured_format": "save-memory \"content\" \"category\""
  },
  "conditions": {
    "nl": "Natural language intent via [SAVE: category] tags",
    "structured": "Structured tool call via save-memory command"
  },
  "metrics": {
    "structured": {
      "recall": 0.8,
      "false_positive_rate": 0,
      "ci_95": [
        0.3755282641185388,
        0.9637768390302125
      ],
      "true_positives": 4,
      "false_positives": 0,
      "n_positive_scenarios": 5,
      "n_negative_scenarios": 0
    },
    "nl": {
      "recall": 1.0,
      "false_positive_rate": 0,
      "ci_95": [
        0.5655085052479191,
        1
      ],
      "true_positives": 5,
      "false_positives": 0,
      "n_positive_scenarios": 5,
      "n_negative_scenarios": 0
    }
  },
  "scenario_level_analysis": {
    "description": "PRIMARY analysis - treats scenario as unit (statistically defensible)",
    "n_scenarios": 1,
    "nl_better_count": 1,
    "st_better_count": 0,
    "ties_count": 0,
    "median_diff_pp": 19.999999999999996,
    "mean_diff_pp": 19.999999999999996,
    "sign_test_p": 1.0,
    "wilcoxon_p": null,
    "bonferroni_alpha": 0.00625
  },
  "trial_level_comparison": {
    "description": "SECONDARY analysis - treats trials as independent (p-values may be inflated)",
    "caveat": "Trials within a scenario are correlated; use scenario-level analysis for valid inference",
    "nl_minus_structured_pp": 19.999999999999996,
    "mcnemar_chi_sq": 0.0,
    "mcnemar_p_value": 1.0,
    "nl_wins": 1,
    "structured_wins": 0,
    "both_succeed": 4,
    "both_fail": 0
  },
  "power_analysis": {
    "observed_effect": 0.19999999999999996,
    "power_observed": 0.17,
    "required_n_80_power": 40,
    "required_n_90_power": 53,
    "min_detectable_effect_80": 0.56,
    "p_discordant_estimate": 0.2,
    "current_n": 5
  },
  "verification_language": {
    "nl_overall_rate": 0.0,
    "st_overall_rate": 0.0,
    "nl_verif_count": 0,
    "st_verif_count": 0,
    "nl_failure_verif_rate": null,
    "st_failure_verif_rate": 0.0
  },
  "fidelity": {
    "nl_wins": 0,
    "structured_wins": 0,
    "ties": 4,
    "total": 4,
    "consistent_count": 4,
    "inconsistent_count": 0,
    "consistency_rate": 1.0,
    "comparisons": [
      {
        "scenario_id": "mem_implicit_004",
        "trial": 1,
        "winner": "tie",
        "reason": "AB: Both A and B capture the same interpretation of \"rate ~100/60\" as approximately 100 requests per 60 seconds, with B adding the equivalent \"~100/minute\" which is mathematically correct but not explicitly stated by the user. | BA: Both accurately capture the rate information as \"approximately 100 per 60 seconds,\" though the original message \"rate ~100/60\" is ambiguous and could refer to various rate metrics, not necessarily a \"rate limit\" - both versions make the same reasonable interpretation.",
        "ab_winner": "tie",
        "ba_winner": "tie",
        "consistent": true,
        "nl_content": "rate limit of approximately 100 requests per 60 seconds",
        "structured_content": "<save-memory category=\"constraint\">Rate limit is approximately 100 requests per 60 seconds (~100/minute)</save-memory>"
      },
      {
        "scenario_id": "mem_implicit_004",
        "trial": 2,
        "winner": "tie",
        "reason": "AB: Both correctly interpret \"rate ~100/60\" as approximately 100 requests per 60 seconds, with neither adding inappropriate information nor missing key details. | BA: Both accurately capture the user's cryptic \"rate ~100/60\" message as approximately 100 requests per 60 seconds, with A adding slightly more formatting and B being more concise, but neither is clearly superior in accuracy or completeness.",
        "ab_winner": "tie",
        "ba_winner": "tie",
        "consistent": true,
        "nl_content": "rate limit of ~100 requests per 60 seconds",
        "structured_content": "<save-memory category=\"constraint\">Rate limit is approximately 100 requests per 60 seconds (~100/minute)</save-memory>"
      },
      {
        "scenario_id": "mem_implicit_004",
        "trial": 3,
        "winner": "tie",
        "reason": "AB: Both A and B accurately interpret \"rate ~100/60\" as approximately 100 requests per 60 seconds (per minute), with neither adding false information nor missing key details - they just differ in formatting. | BA: Both interpretations assume \"rate ~100/60\" refers to a rate limit of 100 requests per 60 seconds, which is a reasonable inference but not explicitly stated in the original message - the user only wrote \"rate ~100/60\" without specifying what kind of rate or what the numbers represent, so both are making the same assumption with equivalent accuracy.",
        "ab_winner": "tie",
        "ba_winner": "tie",
        "consistent": true,
        "nl_content": "rate limit is approximately 100 requests per 60 seconds (or about 100 per minute)",
        "structured_content": "<save-memory category=\"constraint\">Rate limit is approximately 100 requests per 60 seconds (~100/minute)</save-memory>"
      },
      {
        "scenario_id": "mem_implicit_004",
        "trial": 4,
        "winner": "tie",
        "reason": "AB: Both A and B correctly interpret \"~100/60\" as approximately 100 requests per 60 seconds, with B adding the equivalent \"~100/minute\" which is a valid inference, and neither adds incorrect information. | BA: Both capture the same interpretation of \"rate ~100/60\" as approximately 100 per 60 seconds, though the original message is ambiguous and could mean other things (like a ratio, heart rate, or other measurement) - neither version is more accurate than the other given this ambiguity.",
        "ab_winner": "tie",
        "ba_winner": "tie",
        "consistent": true,
        "nl_content": "rate limit of approximately 100 requests per 60 seconds",
        "structured_content": "<save-memory category=\"constraint\">Rate limit is approximately 100 requests per 60 seconds (~100/minute)</save-memory>"
      }
    ]
  },
  "familiarity": null,
  "results": [
    {
      "scenario_id": "mem_implicit_004",
      "condition": "structured",
      "query": "rate ~100/60",
      "expected_action": true,
      "detected_intent": false,
      "tool_called": true,
      "success": true,
      "intent_phrases": [],
      "tool_content": "<save-memory category=\"constraint\">Rate limit is approximately 100 requests per 60 seconds (~100/minute)</save-memory>",
      "response_text": "I understand you're sharing a rate limit or quota: **~100 requests per 60 seconds** (approximately 100/minute).\n\n<save-memory category=\"constraint\">Rate limit is approximately 100 requests per 60 seconds (~100/minute)</save-memory>\n\nIs this a rate limit for a specific API or service you're working with? If you'd like, you can share more context and I can help you:\n- Implement rate limiting/throttling in your code\n- Design a retry strategy with backoff\n- Set up a request queue to stay within limits",
      "is_control": false,
      "trial_number": 1,
      "is_true_positive": true,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": false,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null,
      "has_verification_language": false
    },
    {
      "scenario_id": "mem_implicit_004",
      "condition": "nl",
      "query": "rate ~100/60",
      "expected_action": true,
      "detected_intent": true,
      "tool_called": false,
      "success": true,
      "intent_phrases": [
        "I'll save",
        "save that",
        "that"
      ],
      "tool_content": "It looks like you're sharing a rate limit or quota configuration: **~100 requests per 60 seconds** (or approximately 100 per minute).\n\nI'll save that your system has a rate limit of approximately 100 ",
      "response_text": "It looks like you're sharing a rate limit or quota configuration: **~100 requests per 60 seconds** (or approximately 100 per minute).\n\nI'll save that your system has a rate limit of approximately 100 requests per 60 seconds.\n\nIs this for a specific API, service, or component in your project? If you let me know more context (like which service this applies to), I can save that detail as well for future reference.",
      "is_control": false,
      "trial_number": 1,
      "is_true_positive": true,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": false,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null,
      "has_verification_language": false
    },
    {
      "scenario_id": "mem_implicit_004",
      "condition": "structured",
      "query": "rate ~100/60",
      "expected_action": true,
      "detected_intent": false,
      "tool_called": true,
      "success": true,
      "intent_phrases": [],
      "tool_content": "<save-memory category=\"constraint\">Rate limit is approximately 100 requests per 60 seconds (~100/minute)</save-memory>",
      "response_text": "I understand you're sharing a rate limit or quota: approximately 100 requests per 60 seconds (or 100 per minute).\n\n<save-memory category=\"constraint\">Rate limit is approximately 100 requests per 60 seconds (~100/minute)</save-memory>\n\nGot it! I've noted that there's a rate limit of ~100 requests per 60 seconds. Is this for a specific API or service you're working with? Let me know if you need help implementing rate limiting logic or if there's anything else you'd like me to remember about this constraint.",
      "is_control": false,
      "trial_number": 2,
      "is_true_positive": true,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": false,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null,
      "has_verification_language": false
    },
    {
      "scenario_id": "mem_implicit_004",
      "condition": "nl",
      "query": "rate ~100/60",
      "expected_action": true,
      "detected_intent": true,
      "tool_called": false,
      "success": true,
      "intent_phrases": [
        "I'll save",
        "save that",
        "that"
      ],
      "tool_content": "I understand you're sharing a rate limit of approximately 100 requests per 60 seconds (or about 100 per minute).\n\nI'll save that your system has a rate limit of ~100 requests per 60 seconds.\n\nIs this ",
      "response_text": "I understand you're sharing a rate limit of approximately 100 requests per 60 seconds (or about 100 per minute).\n\nI'll save that your system has a rate limit of ~100 requests per 60 seconds.\n\nIs this for a specific API, service, or component in your project? If you let me know more context (like which service this applies to), I can save that detail as well for future reference.",
      "is_control": false,
      "trial_number": 2,
      "is_true_positive": true,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": false,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null,
      "has_verification_language": false
    },
    {
      "scenario_id": "mem_implicit_004",
      "condition": "nl",
      "query": "rate ~100/60",
      "expected_action": true,
      "detected_intent": true,
      "tool_called": false,
      "success": true,
      "intent_phrases": [
        "I'll save",
        "I'll remember"
      ],
      "tool_content": "I'll save that information about your rate limit.\n\nI'll remember that your rate limit is approximately 100 requests per 60 seconds (or about 100 per minute).",
      "response_text": "I'll save that information about your rate limit.\n\nI'll remember that your rate limit is approximately 100 requests per 60 seconds (or about 100 per minute).",
      "is_control": false,
      "trial_number": 3,
      "is_true_positive": true,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": false,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null,
      "has_verification_language": false
    },
    {
      "scenario_id": "mem_implicit_004",
      "condition": "structured",
      "query": "rate ~100/60",
      "expected_action": true,
      "detected_intent": false,
      "tool_called": true,
      "success": true,
      "intent_phrases": [],
      "tool_content": "<save-memory category=\"constraint\">Rate limit is approximately 100 requests per 60 seconds (~100/minute)</save-memory>",
      "response_text": "I understand you're sharing a rate limit or quota: approximately 100 requests per 60 seconds (or 100 per minute).\n\n<save-memory category=\"constraint\">Rate limit is approximately 100 requests per 60 seconds (~100/minute)</save-memory>\n\nGot it! I've noted that there's a rate limit of about 100 requests per 60 seconds. Is this for a specific API or service you're working with? Let me know if you need help implementing rate limiting logic or if there's anything else you'd like me to remember about this constraint.",
      "is_control": false,
      "trial_number": 3,
      "is_true_positive": true,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": false,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null,
      "has_verification_language": false
    },
    {
      "scenario_id": "mem_implicit_004",
      "condition": "structured",
      "query": "rate ~100/60",
      "expected_action": true,
      "detected_intent": false,
      "tool_called": true,
      "success": true,
      "intent_phrases": [],
      "tool_content": "<save-memory category=\"constraint\">Rate limit is approximately 100 requests per 60 seconds (~100/minute)</save-memory>",
      "response_text": "I understand you're sharing a rate limit or rate configuration: **~100/60** (approximately 100 requests per 60 seconds, or about 100 requests per minute).\n\n<save-memory category=\"constraint\">Rate limit is approximately 100 requests per 60 seconds (~100/minute)</save-memory>\n\nIs this a rate limit for a specific API or service you're working with? If you let me know more context, I can help you work within this constraint or implement rate limiting in your code.",
      "is_control": false,
      "trial_number": 4,
      "is_true_positive": true,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": false,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null,
      "has_verification_language": false
    },
    {
      "scenario_id": "mem_implicit_004",
      "condition": "nl",
      "query": "rate ~100/60",
      "expected_action": true,
      "detected_intent": true,
      "tool_called": false,
      "success": true,
      "intent_phrases": [
        "I'll save",
        "save that",
        "that"
      ],
      "tool_content": "It looks like you're sharing a rate limit specification: **~100 requests per 60 seconds** (or approximately 100 per minute).\n\nI'll save that your system has a rate limit of approximately 100 requests ",
      "response_text": "It looks like you're sharing a rate limit specification: **~100 requests per 60 seconds** (or approximately 100 per minute).\n\nI'll save that your system has a rate limit of approximately 100 requests per 60 seconds.\n\nIs this for a specific API, service, or component in your project? If you let me know more context (like which service or endpoint this applies to), I can save that detail as well for future reference.",
      "is_control": false,
      "trial_number": 4,
      "is_true_positive": true,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": false,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null,
      "has_verification_language": false
    },
    {
      "scenario_id": "mem_implicit_004",
      "condition": "structured",
      "query": "rate ~100/60",
      "expected_action": true,
      "detected_intent": false,
      "tool_called": false,
      "success": false,
      "intent_phrases": [],
      "tool_content": null,
      "response_text": "It looks like you're sharing a rate limit or throughput metric: **~100 requests per 60 seconds** (approximately 100/minute).\n\nIs this a rate limit constraint I should remember for a specific service or API you're working with? If so, let me know which service this applies to and I'll save it to memory for future reference.",
      "is_control": false,
      "trial_number": 5,
      "is_true_positive": false,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": true,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null,
      "has_verification_language": false
    },
    {
      "scenario_id": "mem_implicit_004",
      "condition": "nl",
      "query": "rate ~100/60",
      "expected_action": true,
      "detected_intent": true,
      "tool_called": false,
      "success": true,
      "intent_phrases": [
        "I'll save",
        "I'll remember"
      ],
      "tool_content": "I'll save that information about the rate limit.\n\nI'll remember that the rate limit is approximately 100 requests per 60 seconds (or about 100 per minute).",
      "response_text": "I'll save that information about the rate limit.\n\nI'll remember that the rate limit is approximately 100 requests per 60 seconds (or about 100 per minute).",
      "is_control": false,
      "trial_number": 5,
      "is_true_positive": true,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": false,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null,
      "has_verification_language": false
    }
  ]
}