{
  "metadata": {
    "timestamp": "20260201_192824",
    "experiment": "nl_vs_structured_tool_calling",
    "version": "v3_matched_explicitness",
    "num_trials": 5,
    "include_controls": true,
    "seed": 42,
    "n_positive": 1,
    "n_negative": 0,
    "total_observations": 10
  },
  "design": {
    "description": "Both conditions receive identical WHEN-to-save guidance and equally explicit HOW-to-save examples. Vagueness comes from scenarios (user requests), not system prompts.",
    "nl_format": "Natural English (e.g., 'I'll save X to the codebase category')",
    "structured_format": "save-memory \"content\" \"category\""
  },
  "conditions": {
    "nl": "Natural language intent via [SAVE: category] tags",
    "structured": "Structured tool call via save-memory command"
  },
  "metrics": {
    "structured": {
      "recall": 1.0,
      "false_positive_rate": 0,
      "ci_95": [
        0.5655085052479191,
        1
      ],
      "true_positives": 5,
      "false_positives": 0,
      "n_positive_scenarios": 5,
      "n_negative_scenarios": 0
    },
    "nl": {
      "recall": 1.0,
      "false_positive_rate": 0,
      "ci_95": [
        0.5655085052479191,
        1
      ],
      "true_positives": 5,
      "false_positives": 0,
      "n_positive_scenarios": 5,
      "n_negative_scenarios": 0
    }
  },
  "comparison": {
    "nl_minus_structured_pp": 0.0,
    "mcnemar_chi_sq": 0.0,
    "mcnemar_p_value": 1.0,
    "nl_wins": 0,
    "structured_wins": 0,
    "both_succeed": 5,
    "both_fail": 0
  },
  "fidelity": {
    "nl_wins": 1,
    "structured_wins": 2,
    "ties": 2,
    "total": 5,
    "comparisons": [
      {
        "scenario_id": "mem_implicit_002",
        "trial": 1,
        "winner": "structured",
        "reason": "Response B accurately captures the user's statement that \"pg\" refers to the database, while Response A makes an assumption by expanding \"pg\" to specifically mean \"PostgreSQL\" which the user never stated - this is a hallucination."
      },
      {
        "scenario_id": "mem_implicit_002",
        "trial": 2,
        "winner": "structured",
        "reason": "Response B accurately captures that \"pg\" refers to the database (PostgreSQL) without adding unnecessary assumptions, while Response A adds extra context about \"codebase\" and \"future conversations\" that wasn't in the original brief message."
      },
      {
        "scenario_id": "mem_implicit_002",
        "trial": 3,
        "winner": "nl",
        "reason": "Response A correctly interprets \"pg\" as referring to PostgreSQL database, which is accurate, while Response B appears to be an incomplete command format rather than an actual response, though both correctly identify pg as database-related."
      },
      {
        "scenario_id": "mem_implicit_002",
        "trial": 4,
        "winner": "tie",
        "reason": "Both responses correctly capture that \"pg\" refers to the database (PostgreSQL), with neither adding inappropriate information nor missing the key detail - the only difference is formatting/presentation style."
      },
      {
        "scenario_id": "mem_implicit_002",
        "trial": 5,
        "winner": "tie",
        "reason": "Both responses correctly interpret \"pg is db\" as meaning \"pg refers to the database\" and appropriately categorize it as codebase-related information, with Response B adding the reasonable inference of \"PostgreSQL\" which is the standard meaning of \"pg\" in database contexts."
      }
    ]
  },
  "results": [
    {
      "scenario_id": "mem_implicit_002",
      "condition": "structured",
      "query": "pg is db",
      "expected_action": true,
      "detected_intent": false,
      "tool_called": true,
      "success": true,
      "intent_phrases": [],
      "tool_content": "save-memory \"pg refers to the database in this project\" \"codebase\"",
      "response_text": "I've noted that \"pg\" refers to the database in your project. I'll save this for future reference.Got it! I've noted that **\"pg\" refers to the database** in your project. I'll keep this in mind for our conversations - when you mention \"pg\", I'll understand you're referring to your PostgreSQL/database layer.",
      "is_control": false,
      "trial_number": 1,
      "is_true_positive": true,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": false,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null
    },
    {
      "scenario_id": "mem_implicit_002",
      "condition": "nl",
      "query": "pg is db",
      "expected_action": true,
      "detected_intent": true,
      "tool_called": false,
      "success": true,
      "intent_phrases": [
        "I'll save",
        "to the codebase category",
        "codebase"
      ],
      "tool_content": null,
      "response_text": "I understand! You're letting me know that \"pg\" refers to your database (PostgreSQL).\n\nI'll save that \"pg\" refers to the PostgreSQL database in this codebase to the codebase category.\n\nIs there something specific you'd like to do with the database, or were you just giving me context for future reference?",
      "is_control": false,
      "trial_number": 1,
      "is_true_positive": true,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": false,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null
    },
    {
      "scenario_id": "mem_implicit_002",
      "condition": "structured",
      "query": "pg is db",
      "expected_action": true,
      "detected_intent": false,
      "tool_called": true,
      "success": true,
      "intent_phrases": [],
      "tool_content": "save-memory \"pg refers to the database (PostgreSQL)\" \"codebase\"",
      "response_text": "I've noted that \"pg\" refers to your database (PostgreSQL). I'll remember this for our conversation.Got it - **\"pg\" is your database** (PostgreSQL). I'll keep that in mind as we work together. How can I help you with it?",
      "is_control": false,
      "trial_number": 2,
      "is_true_positive": true,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": false,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null
    },
    {
      "scenario_id": "mem_implicit_002",
      "condition": "nl",
      "query": "pg is db",
      "expected_action": true,
      "detected_intent": true,
      "tool_called": false,
      "success": true,
      "intent_phrases": [
        "I'll save",
        "I'll remember"
      ],
      "tool_content": null,
      "response_text": "I'll save that note about your database setup.\n\nI'll remember that \"pg\" refers to your database (PostgreSQL). This will help me understand references to \"pg\" in future conversations about your codebase.\n\nIs there anything specific you'd like help with regarding your PostgreSQL database?",
      "is_control": false,
      "trial_number": 2,
      "is_true_positive": true,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": false,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null
    },
    {
      "scenario_id": "mem_implicit_002",
      "condition": "nl",
      "query": "pg is db",
      "expected_action": true,
      "detected_intent": true,
      "tool_called": false,
      "success": true,
      "intent_phrases": [
        "I'll save",
        "I'll remember"
      ],
      "tool_content": null,
      "response_text": "I'll save that note about your database setup.\n\nI'll remember that \"pg\" refers to your database (PostgreSQL). This will help me understand references to \"pg\" in future conversations about your codebase.",
      "is_control": false,
      "trial_number": 3,
      "is_true_positive": true,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": false,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null
    },
    {
      "scenario_id": "mem_implicit_002",
      "condition": "structured",
      "query": "pg is db",
      "expected_action": true,
      "detected_intent": false,
      "tool_called": true,
      "success": true,
      "intent_phrases": [],
      "tool_content": "save-memory \"pg refers to the database (PostgreSQL)\" \"codebase\"",
      "response_text": "I've noted that \"pg\" refers to the database in your project. This is useful context for future conversations.Got it! I'll remember that **pg = database** (PostgreSQL) in your project. This will be useful context when discussing your codebase - I'll know that references to \"pg\" are about your database layer.",
      "is_control": false,
      "trial_number": 3,
      "is_true_positive": true,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": false,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null
    },
    {
      "scenario_id": "mem_implicit_002",
      "condition": "structured",
      "query": "pg is db",
      "expected_action": true,
      "detected_intent": false,
      "tool_called": true,
      "success": true,
      "intent_phrases": [],
      "tool_content": "save-memory \"pg refers to the database (PostgreSQL)\" \"codebase\"",
      "response_text": "I've noted that \"pg\" refers to the database (PostgreSQL) in your project. I'll remember this for future conversations.Got it! I'll remember that **pg = database (PostgreSQL)** in your project. This is useful context for understanding your codebase - when you refer to \"pg\" in future conversations, I'll know you're talking about your PostgreSQL database.",
      "is_control": false,
      "trial_number": 4,
      "is_true_positive": true,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": false,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null
    },
    {
      "scenario_id": "mem_implicit_002",
      "condition": "nl",
      "query": "pg is db",
      "expected_action": true,
      "detected_intent": true,
      "tool_called": false,
      "success": true,
      "intent_phrases": [
        "I'll remember",
        "I'll save",
        "to the codebase category",
        "codebase"
      ],
      "tool_content": null,
      "response_text": "I'll remember that for future reference.\n\nI'll save that \"pg\" refers to the database (PostgreSQL) in this codebase to the codebase category.\n\nIs there anything specific you'd like help with regarding the database?",
      "is_control": false,
      "trial_number": 4,
      "is_true_positive": true,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": false,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null
    },
    {
      "scenario_id": "mem_implicit_002",
      "condition": "structured",
      "query": "pg is db",
      "expected_action": true,
      "detected_intent": false,
      "tool_called": true,
      "success": true,
      "intent_phrases": [],
      "tool_content": "save-memory \"pg refers to the database (PostgreSQL)\" \"codebase\"",
      "response_text": "I've noted that \"pg\" refers to the database in your context. I'll remember this for our future conversations.Got it! I'll remember that **pg** refers to the database (PostgreSQL) in your codebase. This will be helpful context for when we discuss database-related code or queries.",
      "is_control": false,
      "trial_number": 5,
      "is_true_positive": true,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": false,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null
    },
    {
      "scenario_id": "mem_implicit_002",
      "condition": "nl",
      "query": "pg is db",
      "expected_action": true,
      "detected_intent": true,
      "tool_called": false,
      "success": true,
      "intent_phrases": [
        "I'll save",
        "I'll save",
        "to the codebase category",
        "codebase"
      ],
      "tool_content": null,
      "response_text": "I'll save that information for future reference.\n\nI'll save that \"pg\" refers to the database in this codebase to the codebase category.\n\nGot it! I've noted that \"pg\" refers to the database in your project. This will help me understand references to \"pg\" in future conversations. Is there anything specific you'd like to work on with the database?",
      "is_control": false,
      "trial_number": 5,
      "is_true_positive": true,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": false,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null
    }
  ]
}