{
  "metadata": {
    "timestamp": "20260201_194738",
    "experiment": "nl_vs_structured_tool_calling",
    "version": "v3_matched_explicitness",
    "num_trials": 5,
    "include_controls": true,
    "seed": 42,
    "n_positive": 1,
    "n_negative": 0,
    "total_observations": 10
  },
  "design": {
    "description": "Both conditions receive identical WHEN-to-save guidance and equally explicit HOW-to-save examples. Vagueness comes from scenarios (user requests), not system prompts.",
    "nl_format": "Natural English (e.g., 'I'll save X to the codebase category')",
    "structured_format": "save-memory \"content\" \"category\""
  },
  "conditions": {
    "nl": "Natural language intent via [SAVE: category] tags",
    "structured": "Structured tool call via save-memory command"
  },
  "metrics": {
    "structured": {
      "recall": 1.0,
      "false_positive_rate": 0,
      "ci_95": [
        0.5655085052479191,
        1
      ],
      "true_positives": 5,
      "false_positives": 0,
      "n_positive_scenarios": 5,
      "n_negative_scenarios": 0
    },
    "nl": {
      "recall": 1.0,
      "false_positive_rate": 0,
      "ci_95": [
        0.5655085052479191,
        1
      ],
      "true_positives": 5,
      "false_positives": 0,
      "n_positive_scenarios": 5,
      "n_negative_scenarios": 0
    }
  },
  "comparison": {
    "nl_minus_structured_pp": 0.0,
    "mcnemar_chi_sq": 0.0,
    "mcnemar_p_value": 1.0,
    "nl_wins": 0,
    "structured_wins": 0,
    "both_succeed": 5,
    "both_fail": 0
  },
  "fidelity": {
    "nl_wins": 1,
    "structured_wins": 3,
    "ties": 1,
    "total": 5,
    "comparisons": [
      {
        "scenario_id": "mem_implicit_002",
        "trial": 1,
        "winner": "nl",
        "reason": "Response A accurately captures just what the user said (\"pg refers to your database\"), while Response B hallucinated by expanding \"db\" to specifically mean \"PostgreSQL is used as the database\" when the user only said \"pg is db\" without specifying PostgreSQL."
      },
      {
        "scenario_id": "mem_implicit_002",
        "trial": 2,
        "winner": "structured",
        "reason": "Response B accurately captures the user's statement that \"pg is db\" (pg refers to the database) without adding assumptions, while Response A incorrectly assumes and adds that pg specifically means \"PostgreSQL\" when the user never specified this."
      },
      {
        "scenario_id": "mem_implicit_002",
        "trial": 3,
        "winner": "tie",
        "reason": "Both responses correctly interpret \"pg is db\" as PostgreSQL being the database, capturing the same essential information without hallucination - Response A is more verbose but contains the same core meaning as Response B's concise format."
      },
      {
        "scenario_id": "mem_implicit_002",
        "trial": 4,
        "winner": "structured",
        "reason": "Response B accurately captures exactly what the user said (\"pg is db\") without adding assumptions, while Response A incorrectly assumes and adds that \"pg\" specifically refers to PostgreSQL, which the user never stated."
      },
      {
        "scenario_id": "mem_implicit_002",
        "trial": 5,
        "winner": "structured",
        "reason": "Response B accurately captures the user's exact statement \"pg is db\" without adding assumptions, while Response A incorrectly adds hallucinated details like \"PostgreSQL\" and \"codebase\" that weren't in the original message."
      }
    ]
  },
  "results": [
    {
      "scenario_id": "mem_implicit_002",
      "condition": "structured",
      "query": "pg is db",
      "expected_action": true,
      "detected_intent": false,
      "tool_called": true,
      "success": true,
      "intent_phrases": [],
      "tool_content": "<save-memory category=\"codebase\">pg is db - PostgreSQL is used as the database</save-memory>",
      "response_text": "I've noted that information for future reference.\n\n<save-memory category=\"codebase\">pg is db - PostgreSQL is used as the database</save-memory>\n\nGot it! I'll remember that `pg` refers to the database (PostgreSQL) in this codebase. Let me know if there's anything else you'd like me to help with!",
      "is_control": false,
      "trial_number": 1,
      "is_true_positive": true,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": false,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null
    },
    {
      "scenario_id": "mem_implicit_002",
      "condition": "nl",
      "query": "pg is db",
      "expected_action": true,
      "detected_intent": true,
      "tool_called": false,
      "success": true,
      "intent_phrases": [
        "I'll save",
        "I'll remember"
      ],
      "tool_content": "I'll save that information about your database naming convention.\n\nI'll remember that \"pg\" refers to your database (PostgreSQL). This will be useful context for future conversations when discussing yo",
      "response_text": "I'll save that information about your database naming convention.\n\nI'll remember that \"pg\" refers to your database (PostgreSQL). This will be useful context for future conversations when discussing your codebase or database-related work.",
      "is_control": false,
      "trial_number": 1,
      "is_true_positive": true,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": false,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null
    },
    {
      "scenario_id": "mem_implicit_002",
      "condition": "structured",
      "query": "pg is db",
      "expected_action": true,
      "detected_intent": false,
      "tool_called": true,
      "success": true,
      "intent_phrases": [],
      "tool_content": "<save-memory category=\"codebase\">pg refers to the database</save-memory>",
      "response_text": "I've noted that \"pg\" refers to your database. I'll remember this for future conversations.\n\n<save-memory category=\"codebase\">pg refers to the database</save-memory>\n\nIs there anything you'd like me to help you with regarding your database?",
      "is_control": false,
      "trial_number": 2,
      "is_true_positive": true,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": false,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null
    },
    {
      "scenario_id": "mem_implicit_002",
      "condition": "nl",
      "query": "pg is db",
      "expected_action": true,
      "detected_intent": true,
      "tool_called": false,
      "success": true,
      "intent_phrases": [
        "I'll save",
        "I'll remember"
      ],
      "tool_content": "I'll save that information about your database setup.\n\nI'll remember that \"pg\" refers to your database (PostgreSQL). This will be useful context for future conversations when discussing your database-",
      "response_text": "I'll save that information about your database setup.\n\nI'll remember that \"pg\" refers to your database (PostgreSQL). This will be useful context for future conversations when discussing your database-related code or configurations.",
      "is_control": false,
      "trial_number": 2,
      "is_true_positive": true,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": false,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null
    },
    {
      "scenario_id": "mem_implicit_002",
      "condition": "nl",
      "query": "pg is db",
      "expected_action": true,
      "detected_intent": true,
      "tool_called": false,
      "success": true,
      "intent_phrases": [
        "I'll save",
        "I'll remember"
      ],
      "tool_content": "I'll save that information about your database setup.\n\nI'll remember that \"pg\" refers to your database (PostgreSQL) in your codebase.",
      "response_text": "I'll save that information about your database setup.\n\nI'll remember that \"pg\" refers to your database (PostgreSQL) in your codebase.",
      "is_control": false,
      "trial_number": 3,
      "is_true_positive": true,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": false,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null
    },
    {
      "scenario_id": "mem_implicit_002",
      "condition": "structured",
      "query": "pg is db",
      "expected_action": true,
      "detected_intent": false,
      "tool_called": true,
      "success": true,
      "intent_phrases": [],
      "tool_content": "<save-memory category=\"codebase\">pg refers to the database (PostgreSQL)</save-memory>",
      "response_text": "I've noted that \"pg\" refers to your database.\n\n<save-memory category=\"codebase\">pg refers to the database (PostgreSQL)</save-memory>",
      "is_control": false,
      "trial_number": 3,
      "is_true_positive": true,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": false,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null
    },
    {
      "scenario_id": "mem_implicit_002",
      "condition": "structured",
      "query": "pg is db",
      "expected_action": true,
      "detected_intent": false,
      "tool_called": true,
      "success": true,
      "intent_phrases": [],
      "tool_content": "<save-memory category=\"codebase\">pg is db - \"pg\" refers to the database</save-memory>",
      "response_text": "I've noted that information for future reference.\n\n<save-memory category=\"codebase\">pg is db - \"pg\" refers to the database</save-memory>\n\nGot it! I'll remember that \"pg\" refers to the database in your codebase. Is there anything else you'd like me to help you with?",
      "is_control": false,
      "trial_number": 4,
      "is_true_positive": true,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": false,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null
    },
    {
      "scenario_id": "mem_implicit_002",
      "condition": "nl",
      "query": "pg is db",
      "expected_action": true,
      "detected_intent": true,
      "tool_called": false,
      "success": true,
      "intent_phrases": [
        "I'll save",
        "I'll remember"
      ],
      "tool_content": "I'll save that information about your database naming convention.\n\nI'll remember that \"pg\" refers to your database (PostgreSQL). This will be helpful context for future conversations when discussing y",
      "response_text": "I'll save that information about your database naming convention.\n\nI'll remember that \"pg\" refers to your database (PostgreSQL). This will be helpful context for future conversations when discussing your database setup or queries.",
      "is_control": false,
      "trial_number": 4,
      "is_true_positive": true,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": false,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null
    },
    {
      "scenario_id": "mem_implicit_002",
      "condition": "structured",
      "query": "pg is db",
      "expected_action": true,
      "detected_intent": false,
      "tool_called": true,
      "success": true,
      "intent_phrases": [],
      "tool_content": "<save-memory category=\"codebase\">pg is db - PostgreSQL database reference</save-memory>",
      "response_text": "I've noted that information for future reference.\n\n<save-memory category=\"codebase\">pg is db - PostgreSQL database reference</save-memory>\n\nGot it! I'll remember that \"pg\" refers to your database (PostgreSQL). Let me know if you need help with anything related to it!",
      "is_control": false,
      "trial_number": 5,
      "is_true_positive": true,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": false,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null
    },
    {
      "scenario_id": "mem_implicit_002",
      "condition": "nl",
      "query": "pg is db",
      "expected_action": true,
      "detected_intent": true,
      "tool_called": false,
      "success": true,
      "intent_phrases": [
        "I'll save",
        "I'll remember"
      ],
      "tool_content": "I'll save that information about your database naming convention.\n\nI'll remember that \"pg\" refers to your database (PostgreSQL) in your codebase. This will be helpful context for future conversations ",
      "response_text": "I'll save that information about your database naming convention.\n\nI'll remember that \"pg\" refers to your database (PostgreSQL) in your codebase. This will be helpful context for future conversations when discussing database-related code or configurations.",
      "is_control": false,
      "trial_number": 5,
      "is_true_positive": true,
      "is_false_positive": false,
      "is_true_negative": false,
      "is_false_negative": false,
      "fidelity_completeness": null,
      "fidelity_context": null,
      "fidelity_specificity": null,
      "fidelity_overall": null,
      "saved_content_extracted": null
    }
  ]
}